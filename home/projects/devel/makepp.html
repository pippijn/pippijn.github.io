<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>
      Pippijn - Projects / Devel / Makepp
    </title>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
    <meta http-equiv="content-style-type" content="text/css" />
    <meta name="description" content="Pippijn van Steenhoven - Projects / Devel / Makepp" />
    <link rel="stylesheet" href="/~pippijn/static/css/home.css" type="text/css" title="Clean Blue" media="screen" />
    <link rel="icon" type="image/x-icon" href="/~pippijn/static/favicon.ico" />
  </head>
  <body>
    <div id="header">
      <h1>
        Pippijn van Steenhoven
      </h1>
      <p id="slogan">
        I doubt, therefore I might be
      </p>
    </div>
    <div id="sidebar">
      <h2>
        Menu
      </h2>
      <div id="menubar">
        <ul>
          <li>
            <a href="/~pippijn/home/index">Home</a>
          </li>
          <li>
            <a href="/~pippijn/home/projects">Projects <span class="small">[-]</span></a>
            <ul>
              <li>
                <a href="/~pippijn/home/projects/devel">Developer tools <span class="small">[-]</span></a>
                <ul>
                  <li>
                    <a href="/~pippijn/home/projects/devel/autoproj">Autoproj</a>
                  </li>
                  <li>
                    <a href="/~pippijn/home/projects/devel/clangide">Clang IDE</a>
                  </li>
                  <li>
                    <a href="/~pippijn/home/projects/devel/libcommon">libcommon</a>
                  </li>
                  <li>
                    <a id="actmenu">Autocomb <span class="small">[-]</span></a>
                    <ul>
                      <li>
                        <a href="/~pippijn/home/projects/devel/makepp/project">Project</a>
                      </li>
                      <li>
                        <a href="/~pippijn/home/projects/devel/makepp/variables">Variables</a>
                      </li>
                      <li>
                        <a href="/~pippijn/home/projects/devel/makepp/target">Targets</a>
                      </li>
                      <li>
                        <a href="/~pippijn/home/projects/devel/makepp/template">Templates</a>
                      </li>
                      <li>
                        <a href="/~pippijn/home/projects/devel/makepp/rules">Rules</a>
                      </li>
                      <li>
                        <a href="/~pippijn/home/projects/devel/makepp/examples">Examples</a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>
                <a href="/~pippijn/home/projects/edu">Education <span class="small">[+]</span></a>
              </li>
              <li>
                <a href="/~pippijn/home/projects/games">Games <span class="small">[+]</span></a>
              </li>
              <li>
                <a href="/~pippijn/home/projects/net">Network <span class="small">[+]</span></a>
              </li>
              <li>
                <a href="/~pippijn/home/projects/lang">Languages <span class="small">[+]</span></a>
              </li>
              <li>
                <a href="/~pippijn/home/projects/robotics">Robotics <span class="small">[+]</span></a>
              </li>
              <li>
                <a href="/~pippijn/home/projects/system">Systems <span class="small">[+]</span></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/~pippijn/home/programming">Programming <span class="small">[+]</span></a>
          </li>
          <li>
            <a href="/~pippijn/home/links">Links</a>
          </li>
          <li>
            <a href="/~pippijn/home/contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
    <div id="content">
      <h2>
        Autocomb
      </h2>
      <ul>
        <li>
          <a href='#h1'>Introduction</a>
        </li>
        <li>
          <a href='#h2'>Documentation</a>
        </li>
      </ul>
      <p>
        <span class='code'>Autocomb</span> is a make-inspired build system that compiles to GNU Autotools.
      </p>
      <p>
        <a href='http://xinutec.org/git/devel/makepp.git/'>Git repository</a>
      </p>
      <p>
        This is the future development of <a href='autoproj'>Autoproj</a>. While Autoproj is a working piece of software, <span class='code code'>Autocomb</span> is nowhere, yet. At the moment, there are only ideas, but not much code. The ideas are also very much in flux, so don't expect much stability.
      </p>
      <h3>
        <a id='h1'>Introduction</a>
      </h3>
      <p>
        <span class='code'>Autocomb</span> compiles a purely declarative build definition to POSIX-compliant and thus fairly portable <a href='http://www.gnu.org/software/automake/'>automake</a> input. It solves a few problems with automake, such as the fact that libraries must appear in topological order with respect to internal dependencies. This is still a problem with automake. It basically means that the following automake code fails during installation:
      </p>
      <pre>
   lib_LTLIBRARIES = liba.la libb.la
   liba_la_LIBADD = libb.la
</pre>
      <p>
        <span class='code'>lib_LTLIBRARIES</span> must list the libraries in topological order, so that a definition as <span class='code'>libb.la liba.la</span> would work. <span class='code'>Autocomb</span> solves this problem by topologically sorting the libraries and emitting a properly sorted <span class='code'>lib_LTLIBRARIES</span>.
      </p>
      <p>
        Another issue with automake is poor extensibility. Inference rules can be used to extend automake with new source formats. By adding the new source extensions to <span class='code'>SUFFIXES</span>, automake knows about them and generates the proper <span class='code'>.c</span> to <span class='code'>.o</span> rules. However, if you have a program, which is used to build other sources, you will want to add this to the dependency list for the resulting sources. With inference rules, this is not possible, so you need to write one rule per source file. With many source files, this is a very tedious task and there are two solutions: use GNU Make with pattern rules or generate the rules with a script. Pattern rules can get very <a href='http://xinutec.org/git/aldor/compiler.git/tree/src/aldor/Rules.am?id=5f356e51ca7d642d8ef157404004b42e36ea9012'>complex</a> if you want to support target-specific flags for your tool. Generating rules is always ad-hoc and each type of rules needs its own script.
      </p>
      <p>
        Yet another issue is the lack of wildcards. While wildcards have several disadvantages, they also have many advantages and it is the author's opinion that a good programmer should not suffer, because bad programmers might abuse a feature. The same holds for build systems. Advanced features should not be withheld from advanced users. <span class='code'>Autocomb</span> supports but discourages the use of wildcards.
      </p>
      <h4>
        Autotools integration
      </h4>
      <p>
        <span class='code'>Autocomb</span> input is translated to one or more <span class='code'>Makefile.am</span>s and a single <span class='code'>configure.ac</span>. The unification of automake and autoconf was done, because a lot of knowledge from automake input has to be duplicated in the autoconf input. Things such as which libraries to check for at configure time so that they may be linked against in the Makefile or submodule dependencies are present in both formats. <span class='code'>Autocomb</span> attempts to unify these formats in a new format based on QML and GNU Make.
      </p>
      <h4>
        Flexibility
      </h4>
      <p>
        <span class='code'>Autocomb</span> is, by design, much less flexible than automake and autoconf. It is also much stricter. It gives the user some additional tools the author has been missing in the GNU build system.
      </p>
      <p>
        Source files are looked for in the entire source tree. Files are not explicitly included by other files. Autoconf scripts may be included in the <span class='code'>project</span> block. Additional automake rules may be included in rule files. This gives you all the flexibility back at the expense of the included files being essentially a black box to <span class='code'>Autocomb</span>, thus defeating its static analysis features. <span class='code'>Autocomb</span> guarantees that pure projects, i.e. without external Autotools input, do not cause errors at a lower level. This can no longer be guaranteed in the presence of such black boxes.
      </p>
      <h4>
        Unsupported features
      </h4>
      <p>
        <span class='code'>Autocomb</span> does not plan on supporting percentages, because the author does not believe in those. <span class='code'>cmake</span> is a build system that supports such comfort.
      </p>
      <h3>
        <a id='h2'>Documentation</a>
      </h3>
      <p>
        The documentation is too large, so that it had to be distributed over multiple pages.
      </p>
      <ul>
        <li>
          <a href='makepp/project'>project</a>
        </li>
        <li>
          <a href='makepp/variables'>variables</a>
        </li>
        <li>
          <a href='makepp/target'>targets</a>
        </li>
        <li>
          <a href='makepp/template'>template</a>
        </li>
        <li>
          <a href='makepp/rules'>rules</a>
        </li>
      </ul>
    </div>
    <div id="footer">
      <div id="copyright">
        <a href="/~pippijn/home/contact">Copyright © 2007-2011 Pippijn van Steenhoven</a>
      </div>
      <div id="updated">
        Last updated Mon Jul 18 01:17:37 MEST 2011
      </div>
    </div>
  </body>
</html>
